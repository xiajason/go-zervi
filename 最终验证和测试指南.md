# âœ… æœ€ç»ˆéªŒè¯å’Œæµ‹è¯•æŒ‡å—

## ğŸ¯ æ‰€æœ‰ä¿®å¤å·²å®Œæˆ

### åç«¯ä¿®å¤æ¸…å•

| ä¿®å¤é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| 1. æ•°æ®åº“ç”¨æˆ· | âœ… | vuecmf/vuecmf |
| 2. ç™»å½•å¯†ç  | âœ… | admin/admin123 |
| 3. ç™»å½•æ ¼å¼ | âœ… | æ”¯æŒ `login_name` |
| 4. ç™»å½•å“åº” token | âœ… | åŒ…å« `token` å­—æ®µ |
| 5. ç™»å½•å“åº” user | âœ… | åŒ…å« `user` å¯¹è±¡ |
| 6. ç™»å½•å“åº” server | âœ… | åŒ…å« `server` å¯¹è±¡ |
| 7. èœå•è¡¨ç»“æ„ | âœ… | åŒ…å«æ‰€æœ‰è·¯ç”±å­—æ®µ |
| 8. èœå•å“åº”æ ¼å¼ | âœ… | nav_menu + api_maps |
| 9. èœå•æ ‘å½¢ç»“æ„ | âœ… | å¯¹è±¡æ ¼å¼+children |
| 10. API æ˜ å°„æœåŠ¡ | âœ… | æŸ¥è¯¢æ­£ç¡®çš„è¡¨ |

## ğŸš€ æµ‹è¯•æ­¥éª¤

### æ–¹æ³• 1ï¼šæ— ç—•æ¨¡å¼ï¼ˆæ¨èâ˜…â˜…â˜…â˜…â˜…ï¼‰

**æœ€ç®€å•ã€æœ€å¯é çš„æ–¹æ³•ï¼**

1. æ‰“å¼€æµè§ˆå™¨æ— ç—•æ¨¡å¼ï¼ˆCmd/Ctrl + Shift + Nï¼‰
2. è®¿é—® `http://localhost:8081`
3. è¾“å…¥ admin / admin123
4. ç™»å½•

**é¢„æœŸç»“æœï¼š**
- âœ… ç™»å½•æˆåŠŸ
- âœ… æ˜¾ç¤ºå®Œæ•´åå°é¡µé¢
- âœ… å·¦ä¾§èœå•æ­£å¸¸æ˜¾ç¤º
- âœ… æ§åˆ¶å°æ— é”™è¯¯

---

### æ–¹æ³• 2ï¼šå½»åº•æ¸…é™¤ç¼“å­˜

**åœ¨å½“å‰æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼š**

```javascript
// ä¸€é”®æ¸…é™¤æ‰€æœ‰ç¼“å­˜
(async () => {
  localStorage.clear();
  sessionStorage.clear();
  
  const dbs = await indexedDB.databases();
  dbs.forEach(db => indexedDB.deleteDatabase(db.name));
  
  if ('caches' in window) {
    const names = await caches.keys();
    names.forEach(name => caches.delete(name));
  }
  
  console.log('âœ… å·²æ¸…é™¤ï¼Œ3ç§’ååˆ·æ–°');
  setTimeout(() => location.href = 'http://localhost:8081?t=' + Date.now(), 3000);
})();
```

---

### æ–¹æ³• 3ï¼šéªŒè¯åç«¯æ¥å£

**åœ¨æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•å®Œæ•´æµç¨‹ï¼š**

```javascript
// æµ‹è¯•ç™»å½•
fetch('http://localhost:9000/api/v1/auth/login', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    data: {
      login_name: 'admin',
      password: 'admin123'
    }
  })
})
.then(res => res.json())
.then(loginData => {
  console.log('1ï¸âƒ£ ç™»å½•å“åº”:', loginData);
  
  if (loginData.code === 0) {
    console.log('âœ… ç™»å½•æˆåŠŸ');
    console.log('   - token:', loginData.data.token ? 'å­˜åœ¨' : 'âŒç¼ºå°‘');
    console.log('   - user:', loginData.data.user ? 'å­˜åœ¨' : 'âŒç¼ºå°‘');
    console.log('   - server:', loginData.data.server ? 'å­˜åœ¨' : 'âŒç¼ºå°‘');
    
    // æŒ‰ç…§ VueCMF æ–¹å¼å­˜å‚¨
    localStorage.setItem('vuecmf_token', loginData.data.token);
    localStorage.setItem('vuecmf_user', JSON.stringify(loginData.data.user));
    localStorage.setItem('vuecmf_server', JSON.stringify(loginData.data.server));
    
    console.log('\nâœ… ç™»å½•ä¿¡æ¯å·²å­˜å‚¨');
    
    // æµ‹è¯•èœå•
    return fetch('http://localhost:9000/api/v1/menu/nav');
  } else {
    throw new Error('ç™»å½•å¤±è´¥: ' + loginData.message);
  }
})
.then(res => res.json())
.then(menuData => {
  console.log('\n2ï¸âƒ£ èœå•å“åº”:', menuData);
  
  if (menuData.code === 0) {
    console.log('âœ… èœå•æ•°æ®æ­£å¸¸');
    console.log('   - nav_menu:', menuData.data.nav_menu ? 'å­˜åœ¨' : 'âŒç¼ºå°‘');
    console.log('   - api_maps:', menuData.data.api_maps !== undefined ? 'å­˜åœ¨' : 'âŒç¼ºå°‘');
    
    if (menuData.data.nav_menu) {
      const menuKeys = Object.keys(menuData.data.nav_menu);
      console.log('   - èœå•æ•°é‡:', menuKeys.length);
      console.log('   - èœå•keys:', menuKeys);
      
      // æ£€æŸ¥ç¬¬ä¸€ä¸ªèœå•
      const firstMenu = menuData.data.nav_menu[menuKeys[0]];
      console.log('\n   ç¬¬ä¸€ä¸ªèœå•:', firstMenu.title);
      console.log('   - component_tpl:', firstMenu.component_tpl || 'âŒç¼ºå°‘');
      console.log('   - path_name:', firstMenu.path_name || 'âŒç¼ºå°‘');
      console.log('   - mid:', firstMenu.mid || 'âŒç¼ºå°‘');
      console.log('   - table_name:', firstMenu.table_name || 'âŒç¼ºå°‘');
    }
    
    console.log('\nâœ…âœ…âœ… æ‰€æœ‰æ•°æ®éƒ½æ­£å¸¸ï¼');
    console.log('ç°åœ¨åˆ·æ–°é¡µé¢åº”è¯¥èƒ½çœ‹åˆ°å®Œæ•´ç•Œé¢ï¼');
    console.log('\næ‰§è¡Œ: location.reload();');
    
    setTimeout(() => location.reload(), 2000);
  } else {
    throw new Error('èœå•è·å–å¤±è´¥: ' + menuData.msg);
  }
})
.catch(err => {
  console.error('âŒ æµ‹è¯•å¤±è´¥:', err);
});
```

---

## ğŸ” é—®é¢˜æ’æŸ¥

### å¦‚æœæ— ç—•æ¨¡å¼èƒ½æ­£å¸¸æ˜¾ç¤º

è¯´æ˜ï¼š
- âœ… åç«¯å®Œå…¨æ­£å¸¸
- âŒ é—®é¢˜æ˜¯æµè§ˆå™¨ç¼“å­˜

**è§£å†³æ–¹æ¡ˆï¼š**
- æ¸…é™¤æµè§ˆå™¨æ‰€æœ‰æ•°æ®
- æˆ–å§‹ç»ˆä½¿ç”¨æ— ç—•æ¨¡å¼å¼€å‘

### å¦‚æœæ— ç—•æ¨¡å¼è¿˜æ˜¯ç©ºç™½

éœ€è¦æ£€æŸ¥ï¼š
1. å‰ç«¯ç»„ä»¶æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ˆ`Index.vue`, `System/Index.vue` ç­‰ï¼‰
2. æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯ä¿¡æ¯
3. Network é€‰é¡¹å¡çš„æ‰€æœ‰è¯·æ±‚

---

## ğŸ“ åç«¯æ¥å£æµ‹è¯•å‘½ä»¤

### æµ‹è¯•ç™»å½•
```bash
curl -X POST http://localhost:9000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"data":{"login_name":"admin","password":"admin123"}}' \
  | jq '{code, message, data: {token: (.data.token != null), user: (.data.user != null), server: (.data.server != null)}}'
```

åº”è¯¥è¾“å‡ºï¼š
```json
{
  "code": 0,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "token": true,
    "user": true,
    "server": true
  }
}
```

### æµ‹è¯•èœå•
```bash
curl http://localhost:9000/api/v1/menu/nav \
  | jq '{code, msg, nav_menu_count: (.data.nav_menu | length), has_api_maps: (.data.api_maps != null)}'
```

åº”è¯¥è¾“å‡ºï¼š
```json
{
  "code": 0,
  "msg": "success",
  "nav_menu_count": 5,
  "has_api_maps": true
}
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

**è¯·å…ˆä½¿ç”¨æ— ç—•æ¨¡å¼æµ‹è¯•ï¼**

å¦‚æœæ— ç—•æ¨¡å¼èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œé—®é¢˜å°±100%æ˜¯æµè§ˆå™¨ç¼“å­˜ã€‚

å¦‚æœæ— ç—•æ¨¡å¼è¿˜æ˜¯ç©ºç™½ï¼Œè¯·ï¼š
1. åœ¨æ§åˆ¶å°æ‰§è¡Œä¸Šé¢çš„"æ–¹æ³•3"å®Œæ•´æµ‹è¯•
2. å°†æ‰€æœ‰è¾“å‡ºæˆªå›¾ç»™æˆ‘
3. åˆ‡æ¢åˆ° Network é€‰é¡¹å¡æˆªå›¾

è¿™æ ·æˆ‘å¯ä»¥ç¡®å®šæ˜¯å¦è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼

