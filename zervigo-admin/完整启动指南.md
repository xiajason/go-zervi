# 🚀 Zervigo Admin 完整启动指南

## 📋 系统架构说明

Zervigo Admin 是一个**前后端分离**的系统：

```
┌─────────────────────────────────────────┐
│         Zervigo 完整系统                │
├─────────────────────────────────────────┤
│                                         │
│  前端 (zervigo-admin)                   │
│  ├─ Vue 3 + Element Plus                │
│  ├─ 端口: 3000 (Vite默认)               │
│  └─ 功能: 管理后台界面                  │
│                                         │
│         ↕ HTTP API 调用                 │
│                                         │
│  后端 (Central Brain)                   │
│  ├─ Go + Gin 框架                       │
│  ├─ 端口: 9000                          │
│  └─ 功能: API网关 + 动态菜单             │
│                                         │
└─────────────────────────────────────────┘
```

## 🎯 启动方式说明

### 方式一：仅前端（基本功能）

**适用场景**：
- 查看静态页面
- 测试UI组件
- 不需要动态菜单

**启动方法**：
```bash
cd /Users/szjason72/gozervi/zervigo.demo/zervigo-admin
./quick-start.sh
# 或
npm run dev
```

**访问地址**：http://localhost:3000

**限制**：
- ⚠️ 无法加载动态菜单
- ⚠️ 只能访问静态配置的页面

---

### 方式二：前端 + 后端（完整功能）✅ 推荐

**适用场景**：
- 完整的管理后台功能
- 动态菜单加载
- 所有 API 调用

**启动步骤**：

#### 步骤 1：启动后端服务

**新建终端 1**，执行：
```bash
cd /Users/szjason72/gozervi/zervigo.demo/shared/central-brain
go run .
```

等待看到：
```
🧠 Zervigo中央大脑启动在端口 9000
✅ 服务启动成功
```

#### 步骤 2：启动前端服务

**新建终端 2**，执行：
```bash
cd /Users/szjason72/gozervi/zervigo.demo/zervigo-admin
npm run dev
```

等待看到：
```
VITE v7.2.0  ready in 395 ms
➜  Local:   http://localhost:3000/
```

#### 步骤 3：访问应用

打开浏览器访问：**http://localhost:3000**

**默认账号**：
- 用户名: `admin`
- 密码: `admin123`

---

## 🔍 端口说明

| 服务 | 默认端口 | 说明 |
|------|---------|------|
| **前端 (zervigo-admin)** | 3000 | Vite 开发服务器 |
| **后端 (Central Brain)** | 9000 | API 网关服务 |

⚠️ **注意**：
- 文档中之前错误地写成 5173，实际是 **3000**
- 以终端输出的实际端口为准

---

## 📊 功能对比

| 功能 | 仅前端 | 前端+后端 |
|------|--------|----------|
| 页面访问 | ✅ | ✅ |
| 静态路由 | ✅ | ✅ |
| **动态菜单** | ❌ | ✅ |
| **API调用** | ❌ | ✅ |
| 用户登录 | ⚠️ 本地验证 | ✅ |
| 权限管理 | ❌ | ✅ |
| 数据持久化 | ❌ | ✅ |

---

## 🐛 常见问题

### Q1: 浏览器显示"无法连接服务器"？

**原因**：访问的端口不对

**解决**：
1. 查看终端中 Vite 输出的实际端口
2. 通常是 `http://localhost:3000`
3. **不是** ~~http://localhost:5173~~

---

### Q2: 页面打开但菜单不显示？

**原因**：后端服务未启动

**解决**：
```bash
# 新建终端窗口
cd /Users/szjason72/gozervi/zervigo.demo/shared/central-brain
go run .
```

**验证后端是否运行**：
```bash
curl http://localhost:9000/health
```

应该返回健康检查信息。

---

### Q3: 如何知道后端是否正常运行？

**方法 1：查看终端输出**
```
🧠 Zervigo中央大脑启动在端口 9000
✅ 服务启动成功
```

**方法 2：使用 curl 测试**
```bash
curl http://localhost:9000/health
```

**方法 3：查看浏览器控制台**
打开开发者工具（F12），如果看到菜单加载成功的日志：
```
✅ 菜单加载成功
[路由加载] 可用的模板文件: [...]
```

---

### Q4: 端口被占用怎么办？

**前端端口 3000 被占用**：

Vite 会自动尝试下一个可用端口（3001, 3002...）

**后端端口 9000 被占用**：

查找并关闭占用进程：
```bash
# macOS/Linux
lsof -ti:9000 | xargs kill -9

# 或修改后端配置文件中的端口
```

---

## 📝 完整启动检查清单

### 启动前检查

- [ ] Node.js 已安装 (v22+)
- [ ] Go 已安装 (v1.20+)
- [ ] npm 依赖已安装
- [ ] 端口 3000 和 9000 未被占用

### 启动后检查

- [ ] 后端终端显示"服务启动成功"
- [ ] 前端终端显示 Vite 启动信息
- [ ] 浏览器能访问 http://localhost:3000
- [ ] 能看到登录页面
- [ ] 输入账号密码能登录
- [ ] 登录后能看到菜单

---

## 🎯 推荐工作流程

### 日常开发

1. **早上启动**
   ```bash
   # 终端 1 - 后端
   cd /Users/szjason72/gozervi/zervigo.demo/shared/central-brain
   go run .
   
   # 终端 2 - 前端
   cd /Users/szjason72/gozervi/zervigo.demo/zervigo-admin
   npm run dev
   ```

2. **开发中**
   - 保持两个终端运行
   - 前端修改自动热更新
   - 后端修改需重启

3. **下班关闭**
   - 两个终端都按 `Ctrl+C` 停止

---

## 💡 提示

### 使用 tmux 或 screen 管理多个终端

```bash
# 安装 tmux (如果没有)
brew install tmux

# 创建会话
tmux new -s zervigo

# 分割窗口
Ctrl+B %  # 垂直分割
Ctrl+B "  # 水平分割

# 在不同窗格间切换
Ctrl+B ←→↑↓
```

### 创建启动脚本

创建 `start-all.sh`：
```bash
#!/bin/bash

# 启动后端（后台）
cd /Users/szjason72/gozervi/zervigo.demo/shared/central-brain
go run . &
BACKEND_PID=$!

# 等待后端启动
sleep 2

# 启动前端
cd /Users/szjason72/gozervi/zervigo.demo/zervigo-admin
npm run dev

# 清理：当前端停止时，也停止后端
trap "kill $BACKEND_PID" EXIT
```

---

## 📞 需要帮助？

- 查看日志：前端和后端终端的输出
- 浏览器控制台：F12 查看错误信息
- 文档：`QUICK_START.md`、`DYNAMIC_MENU_GUIDE.md`

---

**更新日期**: 2024-11-06  
**版本**: v2.1  
**状态**: ✅ 端口已修正为 3000  

