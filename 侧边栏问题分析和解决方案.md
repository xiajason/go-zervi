# ä¾§è¾¹æ é—®é¢˜åˆ†æå’Œè§£å†³æ–¹æ¡ˆ

## ğŸ¯ é—®é¢˜åˆ†æ

### ä¾§è¾¹æ åŠ è½½æœºåˆ¶

æ ¹æ® `LayoutService.ts:73` çš„ä»£ç ï¼š

```javascript
const main_menu_keys = Object.keys(this.nav_menu_list.value)
if(main_menu_keys.length > 0) {
    this.main_menu_active.value = this.nav_menu_list.value[main_menu_keys[0]].mid
    this.selectMainMenu(this.main_menu_active.value)
}
```

**æµç¨‹**ï¼š
1. è·å–èœå•å¯¹è±¡çš„æ‰€æœ‰ keysï¼š`Object.keys(nav_menu)`
2. é€‰æ‹©ç¬¬ä¸€ä¸ª key å¯¹åº”çš„èœå•
3. è°ƒç”¨ `selectMainMenu` å°†è¯¥èœå•çš„ `children` æ˜¾ç¤ºåœ¨ä¾§è¾¹æ 

### å½“å‰é—®é¢˜

**Object.keys() è¿”å›çš„é¡ºåº**ï¼š
```javascript
["/", "/companies", "/jobs", "/resumes", "/system"]
// æŒ‰å­—æ¯æ’åºï¼Œä¸æ˜¯æŒ‰ sort_num
```

**ç»“æœ**ï¼š
- ç¬¬ä¸€ä¸ªèœå•æ˜¯ "/" (é¦–é¡µ)
- é¦–é¡µæ²¡æœ‰ children
- **ä¾§è¾¹æ ä¸ºç©º** âŒ

**æœŸæœ›**ï¼š
- ç¬¬ä¸€ä¸ªèœå•åº”è¯¥æ˜¯ "/system" (ç³»ç»Ÿç®¡ç†)
- ç³»ç»Ÿç®¡ç†æœ‰ 3 ä¸ª children
- **ä¾§è¾¹æ æ˜¾ç¤ºå­èœå•** âœ…

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šæä¾› menu_order æ•°ç»„ï¼ˆå·²å®ç°ï¼‰

åç«¯ç°åœ¨è¿”å›ï¼š
```json
{
  "nav_menu": {...},
  "api_maps": {...},
  "menu_order": ["/system", "/jobs", "/resumes", "/companies", "/"]
}
```

**å‰ç«¯éœ€è¦ä¿®æ”¹**ï¼ˆå¦‚æœå¯ä»¥ï¼‰ï¼š
```javascript
// ä¸è¦ç”¨ Object.keys()
// const main_menu_keys = Object.keys(this.nav_menu_list.value)

// åº”è¯¥ç”¨ menu_order
const main_menu_keys = store.menu_order  // éœ€è¦å…ˆå­˜å‚¨ menu_order
```

### æ–¹æ¡ˆ Bï¼šç›´æ¥è®©ç³»ç»Ÿç®¡ç†æ’ç¬¬ä¸€ï¼ˆæœ€ç®€å•ï¼‰

å·²ç»è°ƒæ•´äº†æ•°æ®åº“ï¼š
```sql
UPDATE vuecmf_menu SET sort_num = 0 WHERE menu_id = 2;  -- ç³»ç»Ÿç®¡ç†
```

ä½†å› ä¸º JSON åºåˆ—åŒ–åæŒ‰ key æ’åºï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸è¡Œã€‚

### æ–¹æ¡ˆ Cï¼šæ”¹å˜èœå•çš„ midï¼Œè®©ç³»ç»Ÿç®¡ç†çš„ key æ’ç¬¬ä¸€

å°†ç³»ç»Ÿç®¡ç†çš„ mid æ”¹ä¸º "!" æˆ– "0-system"ï¼Œè¿™æ ·å­—æ¯æ’åºæ—¶ä¼šæ’ç¬¬ä¸€ï¼š

```sql
UPDATE vuecmf_menu SET mid = '0-system' WHERE menu_id = 2;
```

### æ–¹æ¡ˆ Dï¼šç»™é¦–é¡µæ·»åŠ å­èœå•

è®©é¦–é¡µä¹Ÿæœ‰ childrenï¼Œè¿™æ ·ä¾§è¾¹æ å°±ä¸ä¼šç©ºï¼š

```sql
-- ç»™é¦–é¡µæ·»åŠ ä¸€äº›å­èœå•
INSERT INTO vuecmf_menu (pid, model_id, title, path, icon, mid, component_tpl, path_name, table_name, default_action_type, id_path, is_tree, sort_num) VALUES
(1, 10, 'å·¥ä½œå°', '/dashboard/workspace', 'Monitor', '/dashboard/workspace', 'Dashboard/Workspace', 'dashboard-workspace', 'dashboard', 'index', '1,10', 20, 1),
(1, 11, 'æ•°æ®ç»Ÿè®¡', '/dashboard/stats', 'DataAnalysis', '/dashboard/stats', 'Dashboard/Stats', 'dashboard-stats', 'dashboard', 'index', '1,11', 20, 2);
```

---

## ğŸš€ æ¨èæ–¹æ¡ˆï¼šæ–¹æ¡ˆ Cï¼ˆæœ€æœ‰æ•ˆï¼‰

ä¿®æ”¹ç³»ç»Ÿç®¡ç†çš„ midï¼Œè®©å®ƒåœ¨å­—æ¯æ’åºæ—¶æ’ç¬¬ä¸€ï¼š

```sql
UPDATE vuecmf_menu SET mid = '!system' WHERE menu_id = 2;

-- åŒæ—¶æ›´æ–°å­èœå•çš„ mid
UPDATE vuecmf_menu SET mid = '!system/users' WHERE menu_id = 3;
UPDATE vuecmf_menu SET mid = '!system/roles' WHERE menu_id = 4;
UPDATE vuecmf_menu SET mid = '!system/permissions' WHERE menu_id = 5;
```

è¿™æ · Object.keys() è¿”å›ï¼š
```
["!system", "/", "/companies", "/jobs", "/resumes"]
```

ç¬¬ä¸€ä¸ªå°±æ˜¯ç³»ç»Ÿç®¡ç†ï¼

---

## ğŸ” ä¸´æ—¶éªŒè¯

è¯·åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œæˆ‘æä¾›çš„æµ‹è¯•è„šæœ¬ï¼ŒæŸ¥çœ‹ï¼š
1. `Object.keys(navMenu)` çš„é¡ºåº
2. `menu_order` çš„é¡ºåº  
3. ç¬¬ä¸€ä¸ªèœå•æ˜¯å¦æœ‰ children

ç„¶åå‘Šè¯‰æˆ‘ç»“æœï¼Œæˆ‘å¯ä»¥æ®æ­¤é€‰æ‹©æœ€ä½³æ–¹æ¡ˆï¼

